<view class="goods-list">
  <block wx:for="{{list}}" wx:key="{{item.goodsId}}">
    <view class="goods-item">

      <!--优惠信息-->
      <view class="goods-item-concession" hidden="{{item.lesPrice == 0}}">
        <text class="goods-item-concession-icon {{goodsCheckedStateObj[item.goodsId] ? 'active' : ''}}">优惠</text>
        <text class="goods-item-concession-content">{{goodsCheckedStateObj[item.goodsId] ? ('购买指定商品可享优惠，已减' + item.lesPrice) : ('购买指定商品即可享受立减' + item.lesPrice + '元')}}
        </text>
      </view>

      <!-- 主要内容-->
      <view class="goods-item-content">

        <!--左侧checkbox-->
        <checkbox-group bindchange="singleGoodsToggleChecked" class="checkbox-widget" data-id="{{item.goodsId}}">
            <text class="xd {{goodsCheckedStateObj[item.goodsId] ? 'xd-checked' : 'xd-circle'}}"></text>
            <checkbox value="{{item.id}}" class="checkbox" checked="{{goodsCheckedStateObj[item.goodsId]}}" />
        </checkbox-group>

        <!--右侧 商品详情-->
        <view class="goods-item-detail">

          <!--商品图片-->
          <navigator url="/pages/goodsDetail/goodsDetail" class="goods-item-image">
            <image src="{{item.coverImg}}"></image>
          </navigator>

          <!--商品信息-->
          <view class="goods-item-info">

            <!--第一行-->
            <view class="goods-item-info-row">

              <!--商品标题-->
              <navigator url="/pages/goodsDetail/goodsDetail" class="goods-item-title">{{item.name}}</navigator>

              <!--商品价格-->
              <view class="goods-item-price">¥{{item.price}}</view>
            </view>

            <!--第二行-->
            <view class="goods-item-attr-box">

              <!--商品属性-->
              <block wx:for="{{item.priceAttr}}" wx:key="{{item.type}}">
                <text class="goods-item-info-attr">{{item.pValue}}</text>
              </block>
            </view>

            <!--第三行-->
            <view class="goods-item-info-row third">

              <!--库存-->
              <view class="goods-item-num-box">
                <view class="goods-item-num">
                  <view class="goods-item-num-reduce {{item.buyNum > 1 ? '' : 'disabled'}}" 
                  bindtap="updateGoodsNum" data-id="{{item.goodsId}}" data-type="minus">
                    <text class="xd xd-minus"></text>
                  </view>
                  <view class="goods-item-num-input" data-stock="{{item.stock}}">
                    <input placeholder="" value="{{item.buyNum}}" bindinput="inputInputEvent" data-stock="{{item.stock}}" />
                  </view>
                  <view class="goods-item-num-add  {{item.stock == item.buyNum ? 'disabled' : '' }}"
                  bindtap="updateGoodsNum" data-id="{{item.goodsId}}" data-type="add" data-stock="{{item.stock}}">
                    <text class="xd xd-plus"></text>
                  </view>
                </view>
                <text class="goods-item-num-tips" hidden="{{item.stock > 9}}">仅剩{{item.stock}}件</text>
              </view>

              <!--删除-->
              <view class="goods-item-delete" bindTap="deleteCart">
                <text class="xd xd-trash"></text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </block>
</view>